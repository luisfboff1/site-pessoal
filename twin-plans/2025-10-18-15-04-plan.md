# Twin Development Plan
Generated: 2025-10-18
Task: Implementar as melhorias de prioridade alta identificadas pelo twin-analyst
Quality Level: pragmatic

## Análise Técnica

### Estado Atual dos 5 Problemas Críticos:

1. **Build Errors - TypeScript `any`**
   - `components/Lanyard.tsx`: 12 ocorrências de `any` (refs, event handlers, GLTF types)
   - `components/LiquidEther.tsx`: 24 ocorrências de `any` (shader props, FBOs, event handlers)
   - Build passa sem erros, mas type safety comprometida

2. **Hierarquia Visual Confusa**
   - `app/page.tsx`: Lanyard 3D aparece ANTES do hero com nome/título
   - Visitante vê elemento interativo sem contexto
   - Hero tradicional está em segunda posição

3. **Portfolio sem Preview Visual**
   - Links para portfolio apenas no dropdown do navbar (baixa visibilidade)
   - Páginas existem em `/app/portfolio/*/page.tsx`
   - Falta seção dedicada com cards visuais

4. **Assets Faltando**
   - `/public/og-image.jpg` NÃO EXISTE (afeta social sharing)
   - Assets do Lanyard (card.glb, lanyard.png) JÁ EXISTEM

5. **Google Analytics Placeholder**
   - `app/layout.tsx` tem ID `G-XXXXXXXXXX` inválido
   - Scripts carregam mas não coletam dados

### Impactos:
- Type safety comprometida dificulta manutenção
- UX confusa: visitante não entende contexto imediatamente
- Portfolio com baixa descoberta (enterrado em menu)
- Social sharing quebrado (sem preview image)
- Analytics não funcional

## Plano de Implementação

### Arquivos a Modificar:

1. **public/og-image.jpg** (criar)
   - Usar avatar.png como base
   - Redimensionar para 1200x630px
   - Adicionar overlay com nome + título

2. **app/layout.tsx**
   - Substituir `G-XXXXXXXXXX` por `${process.env.NEXT_PUBLIC_GA_ID}`
   - Adicionar fallback para não renderizar script se env var vazio
   - Verificar metadata openGraph aponta para `/og-image.jpg`

3. **.env.local** (criar se não existir)
   - Adicionar `NEXT_PUBLIC_GA_ID=` (vazio por padrão)

4. **.env.example** (criar)
   - Adicionar `NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX` com comentário

5. **components/Lanyard.tsx**
   - Substituir 12 tipos `any`:
     - Refs: `THREE.Group | null`
     - Geometrias: `THREE.BufferGeometry`
     - Materiais: `THREE.Material | THREE.Material[]`
     - Event handlers: `ThreeEvent<MouseEvent>` do @react-three/fiber

6. **components/LiquidEther.tsx**
   - Substituir 24 tipos `any`:
     - Refs: `THREE.Mesh | null`, `THREE.Scene | null`
     - Render targets: `THREE.WebGLRenderTarget`
     - Event handlers: `MouseEvent`, `TouchEvent`
     - Criar interface `IFluidShader` para shader props

7. **components/sections/PortfolioPreview.tsx** (criar novo)
   - 3 cards: Desenvolvimento, Energia Solar, Ciência de Dados
   - Grid responsivo (grid-cols-1 md:grid-cols-3)
   - Framer Motion hover effects
   - Links para páginas de portfolio

8. **app/page.tsx**
   - Mover hero (nome/título/botões) para ANTES do Lanyard
   - Ajustar z-index: texto z-20, Lanyard z-10, LiquidEther z-0
   - Adicionar `<PortfolioPreview />` entre ServicesSection e Footer

### Ordem de Implementação:

1. **Criar OG Image** - Rápido, sem dependências, melhora SEO imediatamente

2. **Configurar Google Analytics com env var** - Mudança simples, não afeta outros componentes

3. **Fixar Type Safety (Lanyard primeiro, depois LiquidEther)** - Independente de UI, começar pelo menor

4. **Criar Portfolio Preview Section** - Novo componente isolado, testável independentemente

5. **Reorganizar Hero Section** - Por último pois altera layout existente (maior risco visual)

**Justificativa:** Começar por mudanças isoladas que não podem quebrar funcionalidade, deixar alteração de layout crítico por último.

### Riscos Técnicos:

1. **Type Safety:**
   - Possível incompatibilidade de tipos entre Three.js e React Three Fiber
   - Mitigação: Testar renderização de cada componente 3D após alteração

2. **Reorganização Hero:**
   - Risco de quebrar z-index layering (texto atrás do 3D)
   - Risco de quebrar responsividade mobile
   - Mitigação: Testar em múltiplas resoluções, ajustar z-index conforme necessário

3. **Portfolio Preview:**
   - Performance se imagens não otimizadas
   - Mitigação: Usar Next.js Image component com lazy loading

## Plano de QA (para twin-tester)

### Cenários de Teste:

**1. Type Safety & Build**
- Executar `npm run build` - deve compilar sem erros
- Navegar landing page - Lanyard e LiquidEther renderizam
- Interagir com Lanyard (hover/drag) - animações funcionam
- Scroll - LiquidEther responde ao movimento

**2. Hero Section**
- Nome/título VISÍVEIS acima do Lanyard
- Texto não oculto atrás de elementos 3D
- Botões clicáveis
- Responsivo em mobile (375px) e desktop (1920px)

**3. Portfolio Preview**
- Seção aparece entre Services e Footer
- 3 cards lado a lado (desktop), empilhados (mobile)
- Hover mostra animação
- Links navegam para páginas corretas

**4. OG Image**
- Compartilhar URL mostra preview com imagem
- Testar em: https://www.opengraph.xyz/

**5. Google Analytics**
- Script presente se env var configurada
- Script ausente se env var vazia

## Próximo Passo

Para implementar este plano, digite: **ok**, **continue**, ou **approve**
Para cancelar, digite: **cancel** ou inicie uma nova tarefa
