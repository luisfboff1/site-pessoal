
# Twin Development Plan
Generated: 2025-10-18
Task: Substituir avatar estático por componente Lanyard 3D no hero section
Quality Level: pragmatic

## Análise Técnica

### Estado Atual

**Avatar no Hero (app/page.tsx linhas 81-98):**
- Avatar circular estático de 224px (w-56 h-56)
- Imagem `/avatar.png` com fallback dicebear
- Posicionado no topo do hero, acima do nome

**Lanyard Atual (app/page.tsx linhas 184-187):**
- Comentado em section separada de 70vh
- Não recebia props de tamanho
- Ocupava tela inteira

**Componente Lanyard (components/Lanyard.tsx):**
- Container hardcoded: `h-[70vh] md:h-screen`
- Props disponíveis: position, gravity, fov, transparent
- Valores atuais para espaço grande:
  - FOV: 20 (muito fechado)
  - Camera: [0, 0, 30] (muito longe)
  - Gravity: [0, -40, 0] (muito forte)
- Física Rapier configurada para escala grande

### Problemas Identificados

1. Lanyard está configurado para ocupar 70vh/tela inteira
2. FOV/camera/gravity incompatíveis com espaço pequeno (224px)
3. Container não aceita props de tamanho customizado
4. Performance WebGL pode impactar mobile
5. Section comentada é código morto

### Mudanças Necessárias

**Remover:**
- Section comentada do Lanyard (linhas 184-187)
- Avatar circular do hero (linhas 81-98)

**Adicionar:**
- Props width/height ao componente Lanyard
- Detecção mobile para fallback
- Lanyard no hero substituindo avatar

**Ajustar:**
- FOV: 20 → 45 (mais amplo para ver todo o card)
- Camera: [0, 0, 30] → [0, 0, 12] (mais próximo)
- Gravity: [0, -40, 0] → [0, -15, 0] (mais suave)
- Container: remover h-[70vh], usar width/height props

## Plano de Implementação

### Arquivos a Modificar:

**1. components/Lanyard.tsx**
- Adicionar props `width?: number` e `height?: number` à interface
- Remover classes `h-[70vh] md:h-screen` do container div
- Aplicar width/height via style inline no container
- Ajustar defaults:
  - fov: 20 → 45
  - position: [0, 0, 30] → [0, 0, 12]
  - gravity: [0, -40, 0] → [0, -15, 0]

**2. app/page.tsx**
- Remover linhas 184-187 (section comentada do Lanyard)
- Remover linhas 81-98 (avatar circular com img)
- Adicionar hook useMediaQuery ou useState para detectar mobile
- Substituir avatar por:
  - Desktop (>768px): `<Lanyard width={224} height={224} />`
  - Mobile (≤768px): `<img src="/avatar.png" />` (fallback)

### Ordem de Implementação:

1. **Modificar components/Lanyard.tsx**
   - Adicionar props width/height
   - Remover hardcoded h-[70vh]
   - Ajustar física/câmera para espaço pequeno
   - Justificativa: Permite testar componente isolado antes de integrar

2. **Modificar app/page.tsx**
   - Remover código morto (section comentada)
   - Implementar detecção mobile
   - Substituir avatar por Lanyard condicional
   - Justificativa: Integração completa com fallback testável

### Riscos Técnicos:

1. **Performance mobile com WebGL**
   - Risco: Lag em devices antigos
   - Mitigação: Fallback para avatar estático em viewport <768px

2. **Física imprevisível em espaço pequeno**
   - Risco: Gravity/bounce podem fazer Lanyard sair do viewport
   - Mitigação: Valores reduzidos (gravity -15, FOV 45, camera 12)

3. **Flash visual durante hydration**
   - Risco: Lanyard com ssr:false pode causar layout shift
   - Mitigação: Container com dimensões fixas (224px)

## Plano de QA (para twin-tester)

### Cenários de Teste:

**1. Desktop (viewport >768px)**
- Acessar http://localhost:3000
- Verificar Lanyard 3D renderiza no hero (224x224px)
- Verificar Lanyard centralizado e sem overflow
- Scroll suave sem travamentos
- Física funciona (se drag implementado)

**2. Mobile (viewport ≤768px)**
- Acessar em viewport mobile
- Verificar avatar estático renderiza (não WebGL)
- Performance fluida sem lag
- Avatar circular de 224px

**3. Responsive**
- Resize desktop → mobile → desktop
- Componente troca entre Lanyard/avatar corretamente
- Sem flash visual ou layout shift

**4. Edge Cases**
- Slow 3G network (Lanyard não bloqueia página)
- Tab inativo (canvas funciona)
- Sem assets (fallback dicebear)

**Visual Validation:**
- Lanyard/avatar têm mesmo tamanho aparente (224px)
- Centralizado horizontalmente
- Acima do nome "Luis Fernando Boff"
- Sem scroll horizontal

## Próximo Passo

Para implementar este plano, digite: **ok**, **continue**, ou **approve**
Para cancelar, digite: **cancel** ou inicie uma nova tarefa
